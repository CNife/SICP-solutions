# 1.2 过程与它们所产生的计算

## 练习 1.9

下面几个过程各定义了一种加起来两个正整数的方法，它们都是基于过程 `inc`（它将参数增加 1）和 `dec`（它将参数减少 1）。

```Scheme
(define (+ a b)
  (if (= a 0)
      b
      (inc (+ (dec a) b))))

(define (+ a b)
  (if (= a 0)
      b
      (+ (dec a) (inc b))))
```

请用代换模型展示这两个过程在求值  `(+ 4 5)` 时所产生的计算过程。这些计算过程是递归的还是迭代的？

---

第一个的计算过程如下，它是递归的：

1. `(+ 4 5)`
2. `(inc (+ 3 5))`
3. `(inc (inc (+ 2 5)))`
4. `(inc (inc (inc (+ 1 5))))`
5. `(inc (inc (inc (inc (+ 0 5)))))`
6. `(inc (inc (inc (inc 5))))`
7. `(inc (inc (inc 6)))`
8. `(inc (inc 7))`
9. `(inc 8)`
10. `9`

第二的计算过程如下，它是迭代的：

1. `(+ 4 5)`
2. `(+ 3 6)`
3. `(+ 2 7)`
4. `(+ 1 8)`
5. `(+ 0 9)`
6. `9`

## 练习 1.10

下面过程计算一个称为 Ackermann 函数的数学函数：

```Scheme
(define (A x y)
  (cond ((= y 0) 0)
        ((= x 0) (* 2 y))
        ((= y 1) 2)
        (else (A (- x 1)
                 (A x (- y 1))))))
```

下面各表达式的值是什么：

* `(A 1 10)`
* `(A 2 4)`
* `(A 3 3)`

请考虑下面的过程，其中的 `A` 就是上面定义的过程：

* `(define (f n) (A 0 n))`
* `(define (g n) (A 1 n))`
* `(define (h n) (A 2 n))`
* `(define (k n) (* 5 n n))`

请给出过程 `f`，`g` 和 `h` 对给定整数值 `n` 所计算的函数的数学定义。例如，`(k n)` 计算的是 ![5n^2](https://render.githubusercontent.com/render/math?math=5n%5E2)。

---

### 1. `(A 1 10)` 代换过程

1. `(A 1 10)`
2. `(A 0 (A 1 9))`
3. `(A 0 (A 0 (A 1 8)))`
4. `(A 0 (A 0 (A 0 (A 1 7))))`
5. `(A 0 (A 0 (A 0 (A 0 (A 1 6)))))`
6. `(A 0 (A 0 (A 0 (A 0 (A 0 (A 1 5))))))`
7. `(A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 1 4)))))))`
8. `(A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 1 3))))))))`
9. `(A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 1 2)))))))))`
10. `(A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 1 1))))))))))`
11. `(A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 0 2)))))))))`
12. `(A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 0 4))))))))`
13. `(A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 0 8)))))))`
14. `(A 0 (A 0 (A 0 (A 0 (A 0 (A 0 16))))))`
15. `(A 0 (A 0 (A 0 (A 0 (A 0 32)))))`
16. `(A 0 (A 0 (A 0 (A 0 64))))`
17. `(A 0 (A 0 (A 0 128)))`
18. `(A 0 (A 0 256))`
19. `(A 0 512)`
20. `1024`

因此 `(A 1 n)` 等价于 ![2^n](https://render.githubusercontent.com/render/math?math=2%5En)。

### 2. `(A 2 4)` 代换过程

1. `(A 2 4)`
2. `(A 1 (A 2 3))`
3. `(A 1 (A 1 (A 2 2)))`
4. `(A 1 (A 1 (A 1 (A 2 1))))`
5. `(A 1 (A 1 (A 1 2)))`
6. `(A 1 (A 1 4))`
7. `(A 1 16)`
8. `65536`

因此 `(A x y)` 等价于 ![2^{x^y}](https://render.githubusercontent.com/render/math?math=2%5E%7Bx%5Ey%7D)。

### 3. `(A 3 3)` 代换过程

由上，`(A 3 3)` 等价于 ![2^{3^3}](https://render.githubusercontent.com/render/math?math=2%5E%7B3%5E3%7D)，即 134217728。

`(define (f n) (A 0 n))` 等价于 ![2n](https://render.githubusercontent.com/render/math?math=2n)

| 表达式                   | 等价于                                                                            |
|--------------------------|-----------------------------------------------------------------------------------|
| `(define (f n) (A 0 n))` | ![2n](https://render.githubusercontent.com/render/math?math=2n)                   |
| `(define (g n) (A 1 n))` | ![2^n](https://render.githubusercontent.com/render/math?math=2%5En)               |
| `(define (h n) (A 2 n))` | ![2^{2^n}](https://render.githubusercontent.com/render/math?math=2%5E%7B2%5En%7D) |

## 练习 1.11

函数 `f` 由如下的规则定义：如果 `n < 3`，那么 `f(n) = n`；如果 `n >= 3`，那么 `f(n) = f(n-1) + 2f(n-2) + 3f(n-3)`。请写一个采用递归计算过程计算 `f` 的过程，再写一个采用迭代计算过程计算 `f` 的过程。

---

递归版本：

[练习1.11 f-recursion.ss](<练习1.11 f-recursion.ss>)

```Scheme
(define (f-recursion x)
  (if (< x 3)
      x
      (+ (f-recursion (- x 1))
         (* 2 (f-recursion (- x 2)))
         (* 3 (f-recursion (- x 3))))))
```

迭代版本：

[练习1.11 f-iteration.ss](练习1.11 f-iteration.ss)

```Scheme
(define (f-iteration x)
  (f-iter 0 1 2 x))

(define (f-iter a b c x)
  (if (< x 3)
      c
      (f-iter b
              c
              (+ (* a 3) (* b 2) c)
              (- x 1))))
```
